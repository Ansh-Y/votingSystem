{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lenovo\\\\voting-system\\\\src\\\\components\\\\PollDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PollDetails = () => {\n  _s();\n  const {\n    pollId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user,\n    checkToken\n  } = useAuth();\n  const [poll, setPoll] = useState(null);\n  const [options, setOptions] = useState([]);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [alreadyVoted, setAlreadyVoted] = useState(false);\n  const [showResults, setShowResults] = useState(false);\n  const [results, setResults] = useState([]);\n  const [debugInfo, setDebugInfo] = useState(null);\n\n  // Direct fetch for debugging\n  const fetchDirectPollDetails = async () => {\n    try {\n      setLoading(true);\n      console.log(\"Directly fetching poll details for poll ID:\", pollId);\n      if (!pollId || isNaN(parseInt(pollId))) {\n        console.error(\"Invalid poll ID:\", pollId);\n        setError('Invalid poll ID');\n        setLoading(false);\n        return;\n      }\n\n      // First try the debug endpoint with the correct URL path\n      console.log(`Attempt 1: Using debug endpoint: http://localhost:5000/api/polls/debug/${pollId}`);\n      try {\n        const response = await fetch(`http://localhost:5000/api/polls/debug/${pollId}`);\n        if (response.ok) {\n          const data = await response.json();\n          console.log(\"Debug endpoint poll details success:\", data);\n          setPoll(data);\n          setOptions(data.options || []);\n          setError(null);\n          setLoading(false);\n          return;\n        } else {\n          console.error(`Debug endpoint failed with status: ${response.status}`);\n        }\n      } catch (firstErr) {\n        console.error(\"First attempt failed:\", firstErr);\n      }\n\n      // Second attempt: try regular endpoint with direct fetch\n      console.log(`Attempt 2: Using direct fetch: http://localhost:5000/api/polls/${pollId}`);\n      try {\n        const response2 = await fetch(`http://localhost:5000/api/polls/${pollId}`, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (response2.ok) {\n          const data = await response2.json();\n          console.log(\"Direct endpoint poll details success:\", data);\n          setPoll(data);\n          setOptions(data.options || []);\n          setError(null);\n          setLoading(false);\n          return;\n        } else {\n          console.error(`Direct endpoint failed with status: ${response2.status}`);\n        }\n      } catch (secondErr) {\n        console.error(\"Second attempt failed:\", secondErr);\n      }\n\n      // Third attempt: create a simplified poll object (emergency fallback)\n      console.log(\"Attempt 3: Creating emergency fallback poll\");\n      try {\n        const ongoingPolls = await fetch(`http://localhost:5000/api/polls/debug/ongoing`);\n        if (ongoingPolls.ok) {\n          const pollsData = await ongoingPolls.json();\n          console.log(\"Retrieved ongoing polls for fallback:\", pollsData);\n\n          // Find the matching poll - check different possible response structures\n          let targetPoll = null;\n\n          // If response has a polls property that is an array\n          if (pollsData.polls && Array.isArray(pollsData.polls)) {\n            targetPoll = pollsData.polls.find(p => p.id === parseInt(pollId));\n          }\n          // If response is an array directly\n          else if (Array.isArray(pollsData)) {\n            targetPoll = pollsData.find(p => p.id === parseInt(pollId));\n          }\n          // If response has a message property containing polls data\n          else if (pollsData.message && Array.isArray(pollsData.message)) {\n            targetPoll = pollsData.message.find(p => p.id === parseInt(pollId));\n          }\n          if (targetPoll) {\n            console.log(\"Found matching poll:\", targetPoll);\n\n            // Create a simplified poll with minimal data\n            const simplePoll = {\n              ...targetPoll,\n              options: [{\n                id: 0,\n                option_text: \"Option data couldn't be loaded\",\n                votes: 0\n              }],\n              hasVoted: false,\n              message: \"Limited poll data available - refresh to try again\"\n            };\n            setPoll(simplePoll);\n            setOptions(simplePoll.options);\n            setError(null);\n            setLoading(false);\n            return;\n          } else {\n            console.log(\"No matching poll found in ongoing polls\");\n          }\n        }\n      } catch (thirdErr) {\n        console.error(\"Third attempt failed:\", thirdErr);\n      }\n\n      // If all attempts fail, set error\n      throw new Error(\"Could not retrieve poll details after multiple attempts\");\n    } catch (err) {\n      console.error(\"ALL direct fetch poll details attempts failed:\", err);\n      setError(`Poll not found or has been removed. Please try again later.`);\n      setPoll(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    const fetchPollDetails = async () => {\n      try {\n        setLoading(true);\n        console.log(\"Fetching poll details for ID:\", pollId);\n        if (!pollId || isNaN(parseInt(pollId))) {\n          console.error(\"Invalid poll ID:\", pollId);\n          setError('Invalid poll ID');\n          setLoading(false);\n          return;\n        }\n        try {\n          console.log(\"Attempting to fetch poll with API:\", `/polls/${pollId}`);\n          const response = await api.get(`/polls/${pollId}`);\n          console.log(\"Poll details response:\", response.data);\n          if (!response.data || !response.data.id) {\n            console.error(\"Received empty or invalid poll data\");\n            throw new Error(\"Invalid poll data received\");\n          }\n          setPoll(response.data);\n          setOptions(response.data.options || []);\n\n          // Check if user has already voted\n          const userVoteResponse = await api.get(`/votes/user/${pollId}`);\n          console.log(\"User vote response:\", userVoteResponse);\n          if (userVoteResponse.hasVoted) {\n            setAlreadyVoted(true);\n            setShowResults(true);\n            // Load results automatically if already voted\n            fetchResults();\n          }\n        } catch (apiErr) {\n          console.error('API error fetching poll details:', apiErr.message);\n          console.log(\"Attempting fallback to debug endpoint...\");\n\n          // Fall back to direct fetch\n          await fetchDirectPollDetails();\n        }\n      } catch (err) {\n        console.error('Error fetching poll details:', err);\n        setError('Failed to load poll details. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchPollDetails();\n  }, [pollId]);\n  const fetchResults = async () => {\n    try {\n      const response = await api.get(`/polls/${pollId}/results`);\n      setResults(response.data.options || []);\n    } catch (err) {\n      console.error('Error fetching results:', err);\n      setError('Failed to load results. Please try again later.');\n    }\n  };\n  const handleVote = async () => {\n    if (!selectedOption) {\n      setError('Please select an option to vote');\n      return;\n    }\n    try {\n      setSubmitting(true);\n      setError(null);\n      await api.post(`/polls/${pollId}/vote`, {\n        optionId: selectedOption\n      });\n      setSuccess('Your vote has been recorded successfully!');\n      setAlreadyVoted(true);\n      setShowResults(true);\n      fetchResults();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error submitting vote:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to submit your vote. Please try again.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const formatDate = dateString => {\n    if (!dateString) return 'Not set';\n    const options = {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    };\n    try {\n      return new Date(dateString).toLocaleDateString(undefined, options);\n    } catch (err) {\n      console.error('Date formatting error:', err);\n      return 'Invalid date';\n    }\n  };\n\n  // Calculate time remaining for a poll\n  const getTimeRemaining = endDate => {\n    if (!endDate) return 'No end date';\n    try {\n      const total = Date.parse(endDate) - Date.parse(new Date());\n      if (total <= 0) return 'Ended';\n      const seconds = Math.floor(total / 1000 % 60);\n      const minutes = Math.floor(total / 1000 / 60 % 60);\n      const hours = Math.floor(total / (1000 * 60 * 60) % 24);\n      const days = Math.floor(total / (1000 * 60 * 60 * 24));\n      if (days > 0) return `${days} day${days !== 1 ? 's' : ''} remaining`;\n      if (hours > 0) return `${hours} hour${hours !== 1 ? 's' : ''} remaining`;\n      if (minutes > 0) return `${minutes} minute${minutes !== 1 ? 's' : ''} remaining`;\n      return `${seconds} second${seconds !== 1 ? 's' : ''} remaining`;\n    } catch (err) {\n      console.error('Time calculation error:', err);\n      return 'Unknown time remaining';\n    }\n  };\n  const toggleResults = () => {\n    if (!showResults) {\n      fetchResults();\n    }\n    setShowResults(!showResults);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading poll details...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 12\n    }, this);\n  }\n  if (!poll) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-btn\",\n        onClick: () => navigate(-1),\n        children: \"\\u2190 Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Poll not found or has been removed.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"retry-btn\",\n          onClick: fetchDirectPollDetails,\n          style: {\n            marginTop: '20px',\n            padding: '10px 20px'\n          },\n          children: \"Try Direct Fetch\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this);\n  }\n  const isPollActive = poll.status === 'ongoing';\n  const totalVotes = results && Array.isArray(results) ? results.reduce((sum, option) => sum + (option.vote_count || option.votes || 0), 0) : 0;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"back-btn\",\n      onClick: () => navigate(-1),\n      children: \"\\u2190 Back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"poll-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: poll.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: poll.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"poll-dates\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Started: \", formatDate(poll.start_date)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Ends: \", formatDate(poll.end_date)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this), isPollActive && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"time-remaining\",\n          children: getTimeRemaining(poll.end_date)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"poll-question-box\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: poll.question\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        onClick: () => setError(null),\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"success-message\",\n        onClick: () => setSuccess(null),\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debugging-tools\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"debug-btn\",\n          onClick: fetchDirectPollDetails,\n          style: {\n            fontSize: '12px',\n            padding: '5px 10px',\n            background: '#555'\n          },\n          children: \"Debug Fetch\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this), debugInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-info\",\n        style: {\n          margin: '10px 0',\n          fontSize: '12px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"details\", {\n          children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n            children: \"Debug Info\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n            style: {\n              maxHeight: '150px',\n              overflow: 'auto'\n            },\n            children: JSON.stringify(debugInfo, null, 2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }, this), alreadyVoted ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"already-voted\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You have already cast your vote in this poll.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }, this), !showResults && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"view-results-btn\",\n          onClick: toggleResults,\n          children: \"View Results\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: isPollActive ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"voting-area\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"options-list\",\n            children: options && options.length > 0 ? options.map(option => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `option-item ${selectedOption === option.id ? 'selected' : ''}`,\n              onClick: () => setSelectedOption(option.id),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"option-info\",\n                children: option.option_text || option.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 23\n              }, this)\n            }, option.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 21\n            }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No options available for this poll.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 24\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"vote-btn\",\n            onClick: handleVote,\n            disabled: !selectedOption || submitting || !options || options.length === 0,\n            children: submitting ? 'Submitting...' : 'Submit Vote'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 17\n          }, this), !alreadyVoted && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center',\n              marginTop: '12px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: toggleResults,\n              style: {\n                background: 'none',\n                border: 'none',\n                color: 'var(--primary-color)',\n                textDecoration: 'underline',\n                cursor: 'pointer',\n                padding: '5px'\n              },\n              children: showResults ? 'Hide Results' : 'Preview Results'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"already-voted\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"This poll is \", poll.status === 'pending' ? 'not yet started' : 'already ended', \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"view-results-btn\",\n            onClick: toggleResults,\n            children: showResults ? 'Hide Results' : 'View Results'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 15\n        }, this)\n      }, void 0, false), showResults && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"results-preview\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Results \", !poll.status === 'ended' && '(Live)']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"results-list\",\n          children: results && results.length > 0 ? results.map(option => {\n            const voteCount = option.vote_count || option.votes || 0;\n            const percentage = totalVotes > 0 ? Math.round(voteCount / totalVotes * 100) : 0;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"result-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"option-text\",\n                children: option.option_text || option.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"vote-bar\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"vote-progress\",\n                  style: {\n                    width: `${percentage}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"vote-stats\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"vote-percentage\",\n                  children: [percentage, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"vote-count\",\n                  children: [\"(\", voteCount, \" vote\", voteCount !== 1 ? 's' : '', \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 23\n              }, this)]\n            }, option.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 21\n            }, this);\n          }) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No results available yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"total-votes\",\n          children: [\"Total Votes: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: totalVotes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 28\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 310,\n    columnNumber: 5\n  }, this);\n};\n_s(PollDetails, \"tTA7E9ZOP5Vd7ehslLGTz6H7I6c=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = PollDetails;\nexport default PollDetails;\nvar _c;\n$RefreshReg$(_c, \"PollDetails\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useAuth","api","jsxDEV","_jsxDEV","Fragment","_Fragment","PollDetails","_s","pollId","navigate","user","checkToken","poll","setPoll","options","setOptions","selectedOption","setSelectedOption","loading","setLoading","submitting","setSubmitting","error","setError","success","setSuccess","alreadyVoted","setAlreadyVoted","showResults","setShowResults","results","setResults","debugInfo","setDebugInfo","fetchDirectPollDetails","console","log","isNaN","parseInt","response","fetch","ok","data","json","status","firstErr","response2","headers","localStorage","getItem","secondErr","ongoingPolls","pollsData","targetPoll","polls","Array","isArray","find","p","id","message","simplePoll","option_text","votes","hasVoted","thirdErr","Error","err","fetchPollDetails","get","userVoteResponse","fetchResults","apiErr","handleVote","post","optionId","_err$response","_err$response$data","formatDate","dateString","year","month","day","hour","minute","Date","toLocaleDateString","undefined","getTimeRemaining","endDate","total","parse","seconds","Math","floor","minutes","hours","days","toggleResults","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","marginTop","padding","isPollActive","totalVotes","reduce","sum","option","vote_count","title","description","start_date","end_date","question","fontSize","background","margin","maxHeight","overflow","JSON","stringify","length","map","text","disabled","textAlign","border","color","textDecoration","cursor","voteCount","percentage","round","width","_c","$RefreshReg$"],"sources":["C:/Users/lenovo/voting-system/src/components/PollDetails.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport api from '../services/api';\r\n\r\nconst PollDetails = () => {\r\n  const { pollId } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user, checkToken } = useAuth();\r\n  \r\n  const [poll, setPoll] = useState(null);\r\n  const [options, setOptions] = useState([]);\r\n  const [selectedOption, setSelectedOption] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const [alreadyVoted, setAlreadyVoted] = useState(false);\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [results, setResults] = useState([]);\r\n  const [debugInfo, setDebugInfo] = useState(null);\r\n\r\n  // Direct fetch for debugging\r\n  const fetchDirectPollDetails = async () => {\r\n    try {\r\n      setLoading(true);\r\n      console.log(\"Directly fetching poll details for poll ID:\", pollId);\r\n      \r\n      if (!pollId || isNaN(parseInt(pollId))) {\r\n        console.error(\"Invalid poll ID:\", pollId);\r\n        setError('Invalid poll ID');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      // First try the debug endpoint with the correct URL path\r\n      console.log(`Attempt 1: Using debug endpoint: http://localhost:5000/api/polls/debug/${pollId}`);\r\n      try {\r\n        const response = await fetch(`http://localhost:5000/api/polls/debug/${pollId}`);\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          console.log(\"Debug endpoint poll details success:\", data);\r\n          \r\n          setPoll(data);\r\n          setOptions(data.options || []);\r\n          setError(null);\r\n          setLoading(false);\r\n          return;\r\n        } else {\r\n          console.error(`Debug endpoint failed with status: ${response.status}`);\r\n        }\r\n      } catch (firstErr) {\r\n        console.error(\"First attempt failed:\", firstErr);\r\n      }\r\n      \r\n      // Second attempt: try regular endpoint with direct fetch\r\n      console.log(`Attempt 2: Using direct fetch: http://localhost:5000/api/polls/${pollId}`);\r\n      try {\r\n        const response2 = await fetch(`http://localhost:5000/api/polls/${pollId}`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('token')}` \r\n          }\r\n        });\r\n        \r\n        if (response2.ok) {\r\n          const data = await response2.json();\r\n          console.log(\"Direct endpoint poll details success:\", data);\r\n          \r\n          setPoll(data);\r\n          setOptions(data.options || []);\r\n          setError(null);\r\n          setLoading(false);\r\n          return;\r\n        } else {\r\n          console.error(`Direct endpoint failed with status: ${response2.status}`);\r\n        }\r\n      } catch (secondErr) {\r\n        console.error(\"Second attempt failed:\", secondErr);\r\n      }\r\n      \r\n      // Third attempt: create a simplified poll object (emergency fallback)\r\n      console.log(\"Attempt 3: Creating emergency fallback poll\");\r\n      try {\r\n        const ongoingPolls = await fetch(`http://localhost:5000/api/polls/debug/ongoing`);\r\n        if (ongoingPolls.ok) {\r\n          const pollsData = await ongoingPolls.json();\r\n          console.log(\"Retrieved ongoing polls for fallback:\", pollsData);\r\n          \r\n          // Find the matching poll - check different possible response structures\r\n          let targetPoll = null;\r\n          \r\n          // If response has a polls property that is an array\r\n          if (pollsData.polls && Array.isArray(pollsData.polls)) {\r\n            targetPoll = pollsData.polls.find(p => p.id === parseInt(pollId));\r\n          } \r\n          // If response is an array directly\r\n          else if (Array.isArray(pollsData)) {\r\n            targetPoll = pollsData.find(p => p.id === parseInt(pollId));\r\n          }\r\n          // If response has a message property containing polls data\r\n          else if (pollsData.message && Array.isArray(pollsData.message)) {\r\n            targetPoll = pollsData.message.find(p => p.id === parseInt(pollId));\r\n          }\r\n          \r\n          if (targetPoll) {\r\n            console.log(\"Found matching poll:\", targetPoll);\r\n            \r\n            // Create a simplified poll with minimal data\r\n            const simplePoll = {\r\n              ...targetPoll,\r\n              options: [\r\n                { id: 0, option_text: \"Option data couldn't be loaded\", votes: 0 }\r\n              ],\r\n              hasVoted: false,\r\n              message: \"Limited poll data available - refresh to try again\"\r\n            };\r\n            \r\n            setPoll(simplePoll);\r\n            setOptions(simplePoll.options);\r\n            setError(null);\r\n            setLoading(false);\r\n            return;\r\n          } else {\r\n            console.log(\"No matching poll found in ongoing polls\");\r\n          }\r\n        }\r\n      } catch (thirdErr) {\r\n        console.error(\"Third attempt failed:\", thirdErr);\r\n      }\r\n      \r\n      // If all attempts fail, set error\r\n      throw new Error(\"Could not retrieve poll details after multiple attempts\");\r\n      \r\n    } catch (err) {\r\n      console.error(\"ALL direct fetch poll details attempts failed:\", err);\r\n      setError(`Poll not found or has been removed. Please try again later.`);\r\n      setPoll(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  useEffect(() => {\r\n    const fetchPollDetails = async () => {\r\n      try {\r\n        setLoading(true);\r\n        console.log(\"Fetching poll details for ID:\", pollId);\r\n        \r\n        if (!pollId || isNaN(parseInt(pollId))) {\r\n          console.error(\"Invalid poll ID:\", pollId);\r\n          setError('Invalid poll ID');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          console.log(\"Attempting to fetch poll with API:\", `/polls/${pollId}`);\r\n          const response = await api.get(`/polls/${pollId}`);\r\n          console.log(\"Poll details response:\", response.data);\r\n          \r\n          if (!response.data || !response.data.id) {\r\n            console.error(\"Received empty or invalid poll data\");\r\n            throw new Error(\"Invalid poll data received\");\r\n          }\r\n          \r\n          setPoll(response.data);\r\n          setOptions(response.data.options || []);\r\n          \r\n          // Check if user has already voted\r\n          const userVoteResponse = await api.get(`/votes/user/${pollId}`);\r\n          console.log(\"User vote response:\", userVoteResponse);\r\n          if (userVoteResponse.hasVoted) {\r\n            setAlreadyVoted(true);\r\n            setShowResults(true);\r\n            // Load results automatically if already voted\r\n            fetchResults();\r\n          }\r\n        } catch (apiErr) {\r\n          console.error('API error fetching poll details:', apiErr.message);\r\n          console.log(\"Attempting fallback to debug endpoint...\");\r\n          \r\n          // Fall back to direct fetch\r\n          await fetchDirectPollDetails();\r\n        }\r\n      } catch (err) {\r\n        console.error('Error fetching poll details:', err);\r\n        setError('Failed to load poll details. Please try again later.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchPollDetails();\r\n  }, [pollId]);\r\n  \r\n  const fetchResults = async () => {\r\n    try {\r\n      const response = await api.get(`/polls/${pollId}/results`);\r\n      setResults(response.data.options || []);\r\n    } catch (err) {\r\n      console.error('Error fetching results:', err);\r\n      setError('Failed to load results. Please try again later.');\r\n    }\r\n  };\r\n  \r\n  const handleVote = async () => {\r\n    if (!selectedOption) {\r\n      setError('Please select an option to vote');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setSubmitting(true);\r\n      setError(null);\r\n      \r\n      await api.post(`/polls/${pollId}/vote`, {\r\n        optionId: selectedOption\r\n      });\r\n      \r\n      setSuccess('Your vote has been recorded successfully!');\r\n      setAlreadyVoted(true);\r\n      setShowResults(true);\r\n      fetchResults();\r\n    } catch (err) {\r\n      console.error('Error submitting vote:', err);\r\n      setError(err.response?.data?.error || 'Failed to submit your vote. Please try again.');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n  \r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'Not set';\r\n    \r\n    const options = { \r\n      year: 'numeric', \r\n      month: 'short', \r\n      day: 'numeric',\r\n      hour: '2-digit', \r\n      minute: '2-digit'\r\n    };\r\n    \r\n    try {\r\n      return new Date(dateString).toLocaleDateString(undefined, options);\r\n    } catch (err) {\r\n      console.error('Date formatting error:', err);\r\n      return 'Invalid date';\r\n    }\r\n  };\r\n  \r\n  // Calculate time remaining for a poll\r\n  const getTimeRemaining = (endDate) => {\r\n    if (!endDate) return 'No end date';\r\n    \r\n    try {\r\n      const total = Date.parse(endDate) - Date.parse(new Date());\r\n      if (total <= 0) return 'Ended';\r\n      \r\n      const seconds = Math.floor((total / 1000) % 60);\r\n      const minutes = Math.floor((total / 1000 / 60) % 60);\r\n      const hours = Math.floor((total / (1000 * 60 * 60)) % 24);\r\n      const days = Math.floor(total / (1000 * 60 * 60 * 24));\r\n      \r\n      if (days > 0) return `${days} day${days !== 1 ? 's' : ''} remaining`;\r\n      if (hours > 0) return `${hours} hour${hours !== 1 ? 's' : ''} remaining`;\r\n      if (minutes > 0) return `${minutes} minute${minutes !== 1 ? 's' : ''} remaining`;\r\n      return `${seconds} second${seconds !== 1 ? 's' : ''} remaining`;\r\n    } catch (err) {\r\n      console.error('Time calculation error:', err);\r\n      return 'Unknown time remaining';\r\n    }\r\n  };\r\n  \r\n  const toggleResults = () => {\r\n    if (!showResults) {\r\n      fetchResults();\r\n    }\r\n    setShowResults(!showResults);\r\n  };\r\n  \r\n  if (loading) {\r\n    return <div className=\"loading\">Loading poll details...</div>;\r\n  }\r\n  \r\n  if (!poll) {\r\n    return (\r\n      <div className=\"container\">\r\n        <button className=\"back-btn\" onClick={() => navigate(-1)}>← Back</button>\r\n        <div className=\"error-message\">\r\n          <p>Poll not found or has been removed.</p>\r\n          <button \r\n            className=\"retry-btn\" \r\n            onClick={fetchDirectPollDetails}\r\n            style={{ marginTop: '20px', padding: '10px 20px' }}\r\n          >\r\n            Try Direct Fetch\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  const isPollActive = poll.status === 'ongoing';\r\n  const totalVotes = results && Array.isArray(results) \r\n    ? results.reduce((sum, option) => sum + (option.vote_count || option.votes || 0), 0) \r\n    : 0;\r\n  \r\n  return (\r\n    <div className=\"container\">\r\n      <button \r\n        className=\"back-btn\" \r\n        onClick={() => navigate(-1)}\r\n      >\r\n        ← Back\r\n      </button>\r\n      \r\n      <div className=\"poll-details\">\r\n        <h3>{poll.title}</h3>\r\n        <p>{poll.description}</p>\r\n        \r\n        <div className=\"poll-dates\">\r\n          <span>Started: {formatDate(poll.start_date)}</span>\r\n          <span>Ends: {formatDate(poll.end_date)}</span>\r\n          {isPollActive && (\r\n            <span className=\"time-remaining\">{getTimeRemaining(poll.end_date)}</span>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"poll-question-box\">\r\n          <h4>{poll.question}</h4>\r\n        </div>\r\n        \r\n        {error && (\r\n          <div className=\"error-message\" onClick={() => setError(null)}>\r\n            {error}\r\n          </div>\r\n        )}\r\n        \r\n        {success && (\r\n          <div className=\"success-message\" onClick={() => setSuccess(null)}>\r\n            {success}\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"debugging-tools\">\r\n          <button \r\n            className=\"debug-btn\" \r\n            onClick={fetchDirectPollDetails}\r\n            style={{ fontSize: '12px', padding: '5px 10px', background: '#555' }}\r\n          >\r\n            Debug Fetch\r\n          </button>\r\n        </div>\r\n        \r\n        {debugInfo && (\r\n          <div className=\"debug-info\" style={{ margin: '10px 0', fontSize: '12px' }}>\r\n            <details>\r\n              <summary>Debug Info</summary>\r\n              <pre style={{ maxHeight: '150px', overflow: 'auto' }}>\r\n                {JSON.stringify(debugInfo, null, 2)}\r\n              </pre>\r\n            </details>\r\n          </div>\r\n        )}\r\n        \r\n        {alreadyVoted ? (\r\n          <div className=\"already-voted\">\r\n            <p>You have already cast your vote in this poll.</p>\r\n            {!showResults && (\r\n              <button \r\n                className=\"view-results-btn\" \r\n                onClick={toggleResults}\r\n              >\r\n                View Results\r\n              </button>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {isPollActive ? (\r\n              <div className=\"voting-area\">\r\n                <div className=\"options-list\">\r\n                  {options && options.length > 0 ? options.map(option => (\r\n                    <div \r\n                      key={option.id} \r\n                      className={`option-item ${selectedOption === option.id ? 'selected' : ''}`}\r\n                      onClick={() => setSelectedOption(option.id)}\r\n                    >\r\n                      <div className=\"option-info\">{option.option_text || option.text}</div>\r\n                    </div>\r\n                  )) : <p>No options available for this poll.</p>}\r\n                </div>\r\n                \r\n                <button \r\n                  className=\"vote-btn\" \r\n                  onClick={handleVote}\r\n                  disabled={!selectedOption || submitting || !options || options.length === 0}\r\n                >\r\n                  {submitting ? 'Submitting...' : 'Submit Vote'}\r\n                </button>\r\n                \r\n                {!alreadyVoted && (\r\n                  <div style={{ textAlign: 'center', marginTop: '12px' }}>\r\n                    <button \r\n                      onClick={toggleResults}\r\n                      style={{ \r\n                        background: 'none', \r\n                        border: 'none', \r\n                        color: 'var(--primary-color)',\r\n                        textDecoration: 'underline',\r\n                        cursor: 'pointer',\r\n                        padding: '5px'\r\n                      }}\r\n                    >\r\n                      {showResults ? 'Hide Results' : 'Preview Results'}\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"already-voted\">\r\n                <p>This poll is {poll.status === 'pending' ? 'not yet started' : 'already ended'}.</p>\r\n                <button \r\n                  className=\"view-results-btn\" \r\n                  onClick={toggleResults}\r\n                >\r\n                  {showResults ? 'Hide Results' : 'View Results'}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n        \r\n        {showResults && (\r\n          <div className=\"results-preview\">\r\n            <h4>Results {!poll.status === 'ended' && '(Live)'}</h4>\r\n            <div className=\"results-list\">\r\n              {results && results.length > 0 ? (\r\n                results.map(option => {\r\n                  const voteCount = option.vote_count || option.votes || 0;\r\n                  const percentage = totalVotes > 0 \r\n                    ? Math.round((voteCount / totalVotes) * 100) \r\n                    : 0;\r\n                    \r\n                  return (\r\n                    <div key={option.id} className=\"result-item\">\r\n                      <span className=\"option-text\">{option.option_text || option.text}</span>\r\n                      <div className=\"vote-bar\">\r\n                        <div \r\n                          className=\"vote-progress\" \r\n                          style={{ width: `${percentage}%` }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"vote-stats\">\r\n                        <span className=\"vote-percentage\">{percentage}%</span>\r\n                        <span className=\"vote-count\">({voteCount} vote{voteCount !== 1 ? 's' : ''})</span>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })\r\n              ) : (\r\n                <p>No results available yet.</p>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"total-votes\">\r\n              Total Votes: <strong>{totalVotes}</strong>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PollDetails; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}